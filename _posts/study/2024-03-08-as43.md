---
layout: post
title: 개발 상식 공부하기 43. 검색창에 Youtube을 치면 일어나는 과정
subtitle: Engineer Information Processing
author: Jo
categories: STUDY
banner:
  image: https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/c626796d-a4bb-4ffd-962a-5639a9fdbfbb
  opacity: 0.618
  background: "#000"
  height: "100vh"
  min_height: "38vh"
  heading_style: "font-size: 4.25em; font-weight: bold; text-decoration: underline"
  subheading_style: "color: gold"
tags: Study

---

# 목차
🕳 웹 통신의 큰 흐름 <br>
📌 검색창에 Youtube을 치면 일어나는 과정 <br>
🕳 동기 vs 비동기(Synchronous vs Asynchronous) <br>
🕳 블로킹 vs 논블로킹(Blocking vs Non-blocking) <br>
🕳 쿠키와 세션 차이(Cookie & Session) <br>
<br>
<hr>

## 검색창에 Youtube를 치면 일어나는 과정

1. 키워드 입력
- 영어로 "Youtube"나 한글로 "유튜브"라고 입력을 할 때, 키를 누를 때 발생하는 이벤트가 브라우저에 전달된다. 
- 전달된 키워드는 포커싱이 된 주소표시줄에서 나타난다.
- 자음 글자부터 모음 글자가 입력될 때마다, 브라우저는 자체 알고리즘과 개인/익명 모드를 사용하는지에 따라 자동검색어가 URL 창 밑에 나타난다.

2. 키워드 입력 후, "엔터" 입력
- 키보드를 눌렀을 때, 해당 키에 할당된 전기 회로가 닫히게 된다.
- 닫힌 키의 전기회로는 키보드의 동작 방식에 의해서, 신호를 키코드 정수로 변환 후 다시 인코딩하여 컴퓨터로 전달한다.

3. URL 파싱과 문자열 변환
- 브라우저는 이제 사용자가 입력한 텍스트 정보를 가지고 있게 된다.
- 그렇지만, 이 텍스트 정보가 검색어일지 아니면 URL일지는 모르기 때문에 파악을 해야한다.
- 브라우저는 프로토콜이나 유효한 도메인 이름이 주어지지 않으면, 브라우저는 주소창에 놓인 텍스트 정보를 브라우저의 기본 웹 검색엔진에 넘겨준다.
 
4. HSTS 리스트 점검
- HSTS는 "HTTP Strict Transport Security)"의 약자로 HTTPS로만 연결되도록 요청한 웹사이트 목록이다.
- 브라우저는 미리 불러드린 HSTS 리스트를 확인한다.
- 목록에 있다면, 브라우저는 요청을 HTTPS로 보내며, 그렇지 않으면 HTTP로 보내진다. 

5. DNS 검색
> DNS: Domain Name System Servers (도메인 이름 시스템 서버)는 웹사이트를 위한 주소록과 같다.
> 브라우저에 웹 주소를 입력할 때, 브라우저는 그 웹사이트를 검색하기 전에 DNS를 살펴본다.
- 브라우저는 도메인이 캐시에 들어있는지 확인합니다. 
- 만약 있다면, DNS 서버에 대해 ARP 프로세스를 거치게 되며,
- 만약 없다면, 로컬 라우터나 인터넷 공급자의 캐시 DNS 서버로 보내진다.

6. ARP 프로세스
- ARP는 Address Resolution Protocol의 약자로 주소 결정 프로토콜이라고 한다. 
- ARP를 보내기 위해서는 IP의 주소와 MAC 주소를 알아야 한다.
- ARP 캐시가 목적지 IP의 ARP 항목을 가지고 있는지 점검한다. 

7. 소켓 열기
- 브라우저가 목적지 서버의 IP주소를 받으면, 호스트명과 포트 번호를 이용해 TCP 소켓 스트림을 요청한다.
- TCP 세그먼트가 제작되는 Transport 레이어로 전달 후 Network 레이어로 보내져 패킷을 만들어, 패킷은 Link 레이어에 도착한다.

8. TLS handshake
- 클라이언트가 자신의 TLS(Transport Layer Security) 버전 등이 담긴 정보를 메시지에 담아 서버로 보낸다.
- 서버도 TLS 버전, CA(Certificate Authority)가 인정한 공개 인증서 등이 담긴 정보를 메시지에 담아 클라이언트로 보낸다.
- 클라이언트는 인증서의 유효 구분은 CA 목록을 통해 확인하며, 확인이 되면 서버의 공개키를 암호화하여 대칭키를 만든다.
- 서버도 자기 개인키를 복호화해 대칭 마스터키를 생성한다.
- 클라이언트가 끝났다는 메시지와 대칭키를 담아 보낸다.
- 서버는 클라이언트가 보낸 대칭키와 서버의 대칭키와 일치하는지 확인하며, 확인이 되었다면 클라이언트에 끝났다라는 메시지를 보낸다.
- 이제 TLS 세션이 대칭키로 암호화된 애플리케이션(HTTP) 데이터를 전송한다.
![image](https://github.com/CheeseYoung/Cheeseyoung.github.io/assets/132384527/6325f6e8-2efc-4645-82d7-1004d366ef14)

9. HTTPS 서버의 요청 처리
- HTTPD 서버는 HTTP Demon의 약자로, 서버 측에서 요청/응답을 처리한다. (Apache, nginx, lls)
- 서버는 요청을 다음의 파라미터로 쪼갠다.
  - HTTP 요청 메서드(GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, 혹은 TRACE 중 하나)
  - 도메인
  - 요청된 경로/페이지 (여기서, 경로/페이지가 없으면 /가 기본 경로)
- 위와 같은 처리를 포함한 임의의 과정을 거치고 나서, 결과물을 클라이언트에게 보낸다.

10. 브라우저
- 서버가 브라우저에 자원(HTML, CSS, JS, Image...)을 제공하면 브라우저는 HTML, CSS, JS를 파싱하며 렌더링 한다.
- 렌더링은 "DOM 트리 생성 -> 트리 렌더링 생성 -> 트리 배치 -> 트리 색칠" 하는 과정을 거친다.
- 이처럼 브라우저가 파싱 하고 렌더링 하는 방식은 W3C라는 웹 표준화 기구에서 만든 스펙을 기준으로 하고 있다.
- 여기서, 렌더링은 브라우저 화면에 보이도록 하는 작업을 뜻한다.


 <hr>


## 브라우저에 웹 주소를 입력할 때 - 더 간단한 버전

1. 브라우저는 DNS 서버로 가서 웹사이트가 있는 서버의 진짜 주소를 찾는다.
2. 그다음 브라우저는 서버에게 웹사이트의 사본을 클라이언트에게 보내달라는 HTTP 요청 메시지를 서버로 전송한다.
  - 이 메세지, 그리고 클라이언트와 서버 사이에 전송된 모든 데이터는 TCP/IP 연결을 통해서 전송한다
3. 이 메세지를 받은 서버는 클라이언트의 요청을 승인하고, "200 OK" 메세지를 클라이언트에게 전송한다.
  - "200 OK"는 "물론이죠. 당신은 웹 사이트를 볼 수 있어요! 여기 있어요"라는 의미
  - 그다음 서버는 웹사이트의 파일들을 데이터 패킷이라 불리는 작은 일련의 덩어리들로 브라우저에 전송하기 시작한다.
4. 브라우저는 이 작은 덩어리들을 완전한 웹 사이트로 조립하고, 당신에게 보여준다.





