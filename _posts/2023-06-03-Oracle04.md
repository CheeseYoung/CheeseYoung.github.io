---
layout: post
title: Oracle_04_오라클 데이터 정의어
subtitle: Oracle Select Statement
author: Jo
categories: Oracle
banner:
  video: "./assets/images/banners/typing.gif"
  loop: true
  volume: 0.8
  start_at: 8.5
  image: "assets/images/banners/typing.gif"
  opacity: 0.618
  background: "#000"
  height: "100vh"
  min_height: "38vh"
  heading_style: "font-size: 4.25em; font-weight: bold; text-decoration: underline"
  subheading_style: "color: gold"
tags: jekyll theme yat
sidebar: []

---

오늘의 주제 : 오라클 select 명령어와 함수(예제 위주)<br>

 * * *

<b>저번 수업의 정보만으로는 해결할 수 없는 예제 정리</b><br><br>

- 테이블 : 행(row,record,

<hr>
<h2>< 데이터 정의어(DDL)></h2>

<b>1. CREATE TABLE문</b><br>

<b>2. ALTER TABLE문</b><br>

<b>3. DROP TABLE문</b><br>


    <hr><hr>
    여기부터 정리
    <hr>
    
-- 테이블 : 행(row, record, tuple)과 열(column,attribute,field)
-- DDL(데이터 정의어) : Data Definition Language : create, drop, alter
-- DML(데이터 조작어) : Data Manipulation Language : select, insert, delete, update


-- buytbl
CREATE TABLE buytbl2 AS SELECT * FROM buytbl;
-- buytbl의 모든 속성을 가져와서 테이블 만들기
CREATE TABLE buytbl3 AS SELECT idnum, userid, prodname FROM buytbl;
-- buytbl2, buytbl3 삭제
DROP table buytbl2;
DROP table buytbl3;
GRANT SELECT ON buytbl TO SQLDB;
--buytbl2 직접 생성, buytbl과 동일한 구조로 생성
CREATE table buytbl2(
    idnum number(8) not null,
    userid char(8) not null,
    prodname nchar(6) not null,
    groupname nchar(4),
    price number(8) not null,
    amount number(3) not null,
    primary key(idnum),
    FOREIGN KEY (userid) references usertble(userid)
); 
-- not null, primary key : 제약조건
-- primary key : 중복을 허용하지 않고, null을 허용하지 않는 제약조건
   -- pk 제약조건 설정 : 자동으로 index 구성, 이름도 자동 부여
   -- 검색에 가장 많이 활용되는 필드를 설정
-- foreign key : 외래키는 참조 테이블의 pk만 가능
SELECT * FROM ALL_USERS;
CREATE TABLE usertbl2(
    userid char(8) not null,
    username NVARCHAR2(10) not null,
    birthyear NUMBER(4) not null,
    addr NCHAR(2) not null,
    mobile1 CHAR(3),
    mobile2 CHAR(8),
    height NUMBER(3),
    mdate DATE,
    PRIMARY KEY(userid)
);
    
    
    -- 수업자료 DDL
-- 제약조건 : 데이터의 무결성을 지키기 위한 제한된 조건을 의미한다. 
        -- : 어떠한 조건을 만족했을 때 입력되도록 제약할 수 있다.
        -- 종류 : PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK, DEFAULT, NULL
-- 쿼리8-1)
CREATE TABLE NewBook(
    bookid NUMBER(2) PRIMARY KEY,
    bookname NVARCHAR2(20) NOT NULL,
    publisher NVARCHAR2(20) NOT NULL,
    price NUMBER(8) DEFAULT 10000 CHECK(price>1000)
);
-- DEFAULT : 값이 입력되지 않을 경우에 기본적으로 입력되는 값 설정
-- CHECK : 데이터를 점검하는 제약 조건

-- 쿼리8-2)
CREATE TABLE NewCustomer(
    custid NUMBER(5),
    name NVARCHAR2(40),
    address NVARCHAR2(40),
    phone VARCHAR2(30) UNIQUE,
    CONSTRAINT pk_custid primary key(custid));
-- CONSTRAINT : 제약 조건 이름을 설정할 수 있는 키워드
-- 여기서 pk_custid : 제약 조건 이름

-- 쿼리 8-3)
CREATE TABLE NewOrders(
    orderid NUMBER(8),
    custid NUMBER(5) NOT NULL,
    bookid NUMBER(2) NOT NULL,
    saleprice NUMBER(10),
    orderdate DATE,
    CONSTRAINT pk_orderid PRIMARY KEY(orderid),
    CONSTRAINT fk_newcustomer_custid FOREIGN KEY(custid) REFERENCES NewCustomer(custid) ON DELETE CASCADE,
    CONSTRAINT fk_newbook_bookid FOREIGN KEY(bookid) REFERENCES NewBOOK(bookid)
);

-- 쿼리 9) NewBook 테이블 삭제, 삭제 거절 원인을 파악하고 관련된 테이블을 같이 삭제하시오.
DROP TABLE NewBook;
 --> 에러 발생 : neworders테이블이 newbook의 bookid참조 -> neworders를 먼저 삭제해야함
DROP TABLE NewOrders;
DROP TABLE NewBook;

-- 쿼리 10)
CREATE TABLE NewBook(
    bookname VARCHAR2(20),
    publisher VARCHAR2(20),
    price NUMBER,
    PRIMARY KEY(bookname,publisher)
);
-- 쿼리 10-1) 테이블에 isbn속성 추가
ALTER TABLE NewBook ADD isbn VARCHAR2(13);
-- 쿼리 10-2) isbn속성을 number형으로 변경
ALTER TABLE NewBook MODIFY isbn NUMBER;
-- 쿼리 10-3) isbn속성을 삭제
ALTER TABLE NewBook DROP column isbn;
-- 쿼리 10-4) bookname 속성에 not null 제약조건 추가
ALTER TABLE NewBook MODIFY bookname CONSTRAINT notnull_bookname NOT NULL;
-- 쿼리 10-5) bookname 속성을 기본키로 변경
    -- 기존에 bookname에 부여되어있던 primary key 삭제
    ALTER TABLE NewBook DROP PRIMARY KEY(bookname);  //-> 이건 되는지 확인하고 수정 필요
ALTER TABLE NewBook ADD CONSTRAINT pk_bookname PRIMARY KEY(bookname);
