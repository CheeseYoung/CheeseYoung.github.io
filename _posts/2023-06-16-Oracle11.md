---
layout: post
title: Oracle_11_테이블 조인
subtitle: Join table
author: Jo
categories: Oracle
banner:
  video: "./assets/images/banners/typing.gif"
  loop: true
  volume: 0.8
  start_at: 8.5
  image: "assets/images/banners/typing.gif"
  opacity: 0.618
  background: "#000"
  height: "100vh"
  min_height: "38vh"
  heading_style: "font-size: 4.25em; font-weight: bold; text-decoration: underline"
  subheading_style: "color: gold"
tags: Oracle Database SQL
sidebar: []


---

오늘의 주제 : 데이터(테이블)를 조인해보자. <br>
 * * *
 
## JOIN 조인
: 데이터베이스의 테이블은 중복과 공간 낭비를 피하고 데이터의 무결성을 위해서 여러 개의 테이블로 분리하여 저장한다.<br>
이 테이블들은 서로 관계(Relation)을 맺고 있기에, 여러 테이블에서 데이터를 가져오는 경우가 있다.<br>
조인(join)을 통해 두 테이블에서 결과를 추출할 수 있다.<br>

## Inner Join(내부 조인)
: 가장 많이 사용되는 조인으로, 일반적으로 join이라고 하면 inner join이라고 보면 된다.
- 형식
```sql
SELECT 열 목록
FROM 테이블1
  INNER JOIN 테이블2
  ON 조인 조건
[WHERE 검색조건]
```
: 조인 조건은 거창하게 생각할 것 없이, 테이블1과 테이블2를 이어주는 수단이라고 생각하면 된다.<br>
쉽게 말하면, 테이블1과 테이블2의 공통되는 속성을 적어주면 된다. 그 속성을 기준으로 두 테이블을 조인하는 것이다.<br><br>
-- 고객과 고객의 주문에 대한 데이터를 모두 출력
- 방법 1) 표준 sql
```sql
SELECT c.*,orderid,bookid,saleprice
FROM customer c inner join orders o
    on c.custid=o.custid
WHERE saleprice<12000;
```
- 방법 2) 비표준 sql
```sql
SELECT c.*,orderid,bookid,saleprice
FROM customer c, orders o
WHERE c.custid=o.custid AND saleprice<12000;
```
: 둘 중 어떤 방법을 사용해도 같은 결과가 나오지만, 둘 다 방법은 알고 있어야한다.<br>
: 주의할 점은 이름이 같은 속성을 사용할 때는 <b>어느 테이블의 속성</b>인지 표기해줘야한다.<br><br>
-- 고객과 고객의 주문에 대한 데이터를 모두 출력
```sql
// 표준 SQL
SELECT name,sum(saleprice)
FROM customer c INNER JOIN orders o
    ON c.custid=o.custid
GROUP BY c.custid,name;
// 비표준 SQL
SELECT name,sum(saleprice)
FROM customer c, orders o
WHERE c.custid=o.custid
GROUP BY c.custid,name;
```

-- 할인가로 구매한 고객의 이름, 도서의 이름, 정가, 할인가, 할인율을 출력
- 방법 1) 표준 sql
```sql
SELECT name,bookname,price,saleprice,ROUND(((price-saleprice)/price)*100) 할인율
FROM customer c
    INNER JOIN orders o
        ON c.custid=o.custid
    INNER JOIN book b
        ON o.bookid=b.bookid
WHERE price<>saleprice;
```
- 방법 2) 비표준 sql
```sql
SELECT name,bookname,price,saleprice,ROUND(((price-saleprice)/price)*100) 할인율
FROM customer c,orders o,book b
WHERE c.custid=o.custid AND o.bookid=b.bookid AND price<>saleprice;
```
: 3개의 테이블을 조인할때도 방법은 동일하다.







